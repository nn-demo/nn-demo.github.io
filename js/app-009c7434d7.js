/**
 * NatureNet - 
 * @authors 
 * @version v0.0.1
 * @link 
 * @license 
 */
!function(){"use strict";angular.module("app",["app.core","app.widgets","app.layout","app.auth","app.home","app.explore","app.communities","app.projects","app.ideas"])}(),function(){"use strict";angular.module("app.auth",["app.core","app.widgets"])}(),function(){"use strict";angular.module("blocks.exception",["blocks.logger"])}(),function(){"use strict";angular.module("blocks.logger",[])}(),function(){"use strict";angular.module("blocks.router",["ui.router","blocks.logger"])}(),function(){"use strict";angular.module("app.communities",["app.core","app.widgets"])}(),function(){"use strict";angular.module("app.core",["ngAnimate","ngSanitize","blocks.exception","blocks.logger","blocks.router","ui.router","firebase","ngMap","ngplus"])}(),function(){"use strict";angular.module("app.explore",["app.core","app.widgets"])}(),function(){"use strict";angular.module("app.home",["app.core","app.widgets"])}(),function(){"use strict";angular.module("app.ideas",["app.core","app.widgets"])}(),function(){"use strict";angular.module("app.layout",["app.core","app.widgets"])}(),function(){"use strict";angular.module("app.projects",["app.core","app.widgets"])}(),function(){"use strict";angular.module("app.widgets",[])}(),function(){"use strict";function e(e,t,i,a){function n(){var e=[s()];return t.all(e).then(function(){i.info("Authentication Ready")})}function s(){return a.onAuth().then(function(t){return t?(h.userUid=t.uid,e.$broadcast("auth:success",h.userUid),h.userUid):void 0})}function r(e,t){return a.createUser({email:e,password:t}).then(function(e){h.userUid=e.uid,c(h.userUid,h.email,h.name).then(function(){return u(h.email,h.password)})})}function o(t,n){return a.authWithPassword({email:t,password:n}).then(function(t){return h.userUid=t.uid,e.$broadcast("auth:success",h.userUid),d(),i.success("You are now logged in!"),h.userUid})}function c(e,t,n){return a.addUser(e,t,n).then(function(e){return i.success("Welcome to NatureNet!"),e})}function l(e){return 0===h.email.length?(i.error("No email address was entered."),!0):0===h.password.length?(i.error("No password was entered."),!0):0===h.name.length&&"join"===e?(i.error("No username was entered."),!0):!1}function d(){e.$broadcast("auth:hide"),g()}function u(e,t){l("login")||o(e,t)}function p(e,t){l("join")||r(e,t)}function m(){h.isRegister=!0,h.isSignin=!1}function v(){h.isRegister=!1,h.isSignin=!0}function g(){h.isRegister=!1,h.isSignin=!1,h.email="",h.password="",h.name=""}var h=this;h.userUid=void 0,h.newUserObject=void 0,h.email="",h.password="",h.name="",h.login=u,h.join=p,h.close=d,h.isRegister=!1,h.isSignin=!1,n(),e.$on("register:show",m),e.$on("signin:show",v),e.$on("auth:hide",g)}angular.module("app.auth").controller("AuthController",e),e.$inject=["$rootScope","$q","logger","dataservice"]}(),function(){"use strict";function e(){this.config={appErrorPrefix:void 0},this.configure=function(e){this.config.appErrorPrefix=e},this.$get=function(){return{config:this.config}}}function t(e){e.decorator("$exceptionHandler",i)}function i(e,t,i){return function(a,n){var s=t.config.appErrorPrefix||"",r={exception:a,cause:n};a.message=s+a.message,e(a,n),i.error(a.message,r)}}angular.module("blocks.exception").provider("exceptionHandler",e).config(t),t.$inject=["$provide"],i.$inject=["$delegate","exceptionHandler","logger"]}(),function(){"use strict";function e(e,t){function i(i){return function(a){var n,s;return a.code&&a.message&&(n="\n"+a.message,s=i+n),a.message=s,t.error(s),e.reject(a)}}var a={catcher:i};return a}e.$inject=["$q","logger"],angular.module("blocks.exception").factory("exception",e)}(),function(){"use strict";function e(e,t){function i(i,a,n){t.error(i,n),e.error("Error: "+i,a)}function a(t,i,a){e.info("Info: "+t,i)}function n(i,a,n){t.success(i,n),e.info("Success: "+i,a)}function s(t,i,a){e.warn("Warning: "+t,i)}var r={showToasts:!0,error:i,info:a,success:n,warning:s,log:e.log};return r}angular.module("blocks.logger").factory("logger",e),e.$inject=["$log","toastr"]}(),function(){"use strict";function e(e,t,i){function a(e,a,s,r){function o(e,a){e.forEach(function(e){e.config.resolve=angular.extend(e.config.resolve||{},n.resolveAlways),t.state(e.state,e.config)}),a&&!m&&(m=!0,i.otherwise(a))}function c(){a.$on("$stateChangeError",function(t,i,a,n,s,o){if(!p){v.errors++,p=!0;var c=i&&(i.title||i.name||i.loadedTemplateUrl)||"unknown target",l="Error routing to "+c+". "+(o.data||"")+". <br/>"+(o.statusText||"")+": "+(o.status||"");r.warning(l,[i]),e.path("/")}})}function l(){c(),u()}function d(){return s.get()}function u(){a.$on("$stateChangeSuccess",function(e,t,i,s,r){v.changes++,p=!1;var o=(t.title||"")+" "+n.docTitle;a.title=o,a.$broadcast("map:hide")})}var p=!1,m=!1,v={errors:0,changes:0},g={configureStates:o,getStates:d,stateCounts:v};return l(),g}var n={docTitle:void 0,resolveAlways:{}};e.html5Mode(!0),this.configure=function(e){angular.extend(n,e)},this.$get=a,a.$inject=["$location","$rootScope","$state","logger"]}angular.module("blocks.router").provider("routerHelper",e),e.$inject=["$locationProvider","$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function e(e,t,i,a,n){function s(){var e=[r(),o(),c()];return t.all(e).then(function(){var e=[l(p.userId),d(p.userId)];t.all(e).then(function(){n.hideSplash(),a.info("Activated Communities View")})})}function r(){return i.getUsersRecent(1).then(function(e){return p.userId=e[0]["public"].id,p.userId})}function o(){return i.getArray("users").then(function(e){return p.users=e,p.users})}function c(){return i.getArray("groups").then(function(e){return p.groups=e,p.groups})}function l(e){return i.getObservationsArrayByUserId(e).then(function(e){return p.userObservations=e,p.numberOfObservations=0,p.userObservations})}function d(e){return i.getGroupsByUserId(e).then(function(e){return p.userGroups=e,p.userGroups})}function u(e){var i=[l(e),d(e)];return t.all(i).then(function(){p.userId=e,p.observationsDisplayLimit=p.displayLimit,p.groupsDisplayLimit=p.displayLimit,a.info("Updated Communities View based on new userId")})}n.showSplash();var p=this;p.title="Communities",p.sidebarDisplayLimit=5,p.mainDisplayLimit=6,p.userId=void 0,p.users=void 0,p.peopleDisplayLimit=p.sidebarDisplayLimit,p.groups=void 0,p.groupsDisplayLimit=p.sidebarDisplayLimit,p.userObservations=void 0,p.observationsDisplayLimit=p.mainDisplayLimit,p.userGroups=void 0,p.groupsDisplayLimit=p.mainDisplayLimit,p.isPeopleListVisible=!0,p.isGroupsListVisible=!0,p.updateUserId=u,p.formatDate=n.formatDate,s()}angular.module("app.communities").controller("CommunitiesController",e),e.$inject=["$rootScope","$q","dataservice","logger","utility"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"communities",config:{url:"/communities",templateUrl:"app/communities/communities.html",controller:"CommunitiesController",controllerAs:"vm",title:"Communities",settings:{nav:2,content:"Communities"}}}]}angular.module("app.communities").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e){e.options.timeOut=4e3,e.options.positionClass="toast-bottom-right"}function t(e,t,i){e.debugEnabled&&e.debugEnabled(!0),i.configure(a.appErrorPrefix),t.configure({docTitle:" | "+a.appTitle})}var i=angular.module("app.core");i.config(e),e.$inject=["toastr"];var a={appErrorPrefix:"[NN Error] ",appTitle:"NatureNet"};i.value("config",a),i.config(t),t.$inject=["$logProvider","routerHelperProvider","exceptionHandlerProvider"]}(),function(){"use strict";angular.module("app.core").constant("toastr",toastr).constant("moment",moment)}(),function(){"use strict";function e(e){var i="/404";e.configureStates(t(),i)}function t(){return[{state:"404",config:{url:"/404",templateUrl:"app/core/404.html",title:"404"}}]}e.$inject=["routerHelper"],angular.module("app.core").run(e)}(),function(){"use strict";function e(e,t,i,a,n,s,r){function o(e){function t(e){return n("orderBy")(e,"updated_at",!0)}function a(e){return s.catcher("Failed for dataservice.getArray")(e)}var r=new Firebase(D+e).orderByChild("updated_at").limitToLast(50),o=i(r);return o.$loaded().then(t)["catch"](a)}function c(){function t(e){i.resolve(e)}var i=e.defer(),n=new Firebase(D),s=a(n);return s.$onAuth(function(e){t(e)}),i.promise}function l(){function t(e){i.resolve(e)}var i=e.defer(),n=new Firebase(D),s=a(n);return s.$getAuth(function(e){t(e)}),i.promise}function d(e){function t(e){return e}function i(e){return s.catcher("Failed for dataservice.authWithPassword")(e)}var n=new Firebase(D),r=a(n);return r.$authWithPassword(e).then(t)["catch"](i)}function u(e){function t(e){return e}function i(e){return s.catcher("Failed for dataservice.createUser")(e)}var n=new Firebase(D),r=a(n);return r.$createUser(e).then(t)["catch"](i)}function p(e){function t(e){return e}function i(e){return s.catcher("Failed for dataservice.removeUser")(e)}var n=new Firebase(D),r=a(n);return r.$removeUser().then(t)["catch"](i)}function m(t,i,a){function n(e){o.resolve("success")}function r(e){o.reject(s.catcher("Failed for dataservice.updatedUserData")(e))}var o=e.defer(),c=new Firebase(D+"users").child(t),l={};return l["private"]={consent:{required:!0}},l["public"]={id:t,display_name:a,created_at:Firebase.ServerValue.TIMESTAMP},c.update(l,function(e){e?r(e):n()}),o.promise}function v(){function e(e){return e}function i(e){return s.catcher("Failed for dataservice.getUsers")(e)}var a=new Firebase(D+"users"),n=t(a);return n.$loaded().then(e)["catch"](i)}function g(e){function t(e){return n("orderBy")(e,"updated_at",!0)}function a(e){return s.catcher("Failed for dataservice.getUsersRecent")(e)}var r=new Firebase(D+"users").orderByChild("public/updated_at").limitToLast(e),o=i(r);return o.$loaded().then(t)["catch"](a)}function h(){function e(e){return e}function i(e){return s.catcher("Failed for dataservice.getGroups")(e)}var a=new Firebase(D+"groups"),n=t(a);return n.$loaded().then(e)["catch"](i)}function f(e){function t(e){return n("orderBy")(e,"updated_at",!0)}function a(e){return s.catcher("Failed for dataservice.getGroupsByUserId")(e)}var r=new Firebase(D+"groups").orderByChild("members/"+e).equalTo(!0),o=i(r);return o.$loaded().then(t)["catch"](a)}function b(e){function t(e){return n("orderBy")(e,"updated_at",!0)}function a(e){return s.catcher("Failed for dataservice.getObservationsArrayByUserId")(e)}var r=new Firebase(D+"observations").orderByChild("observer").equalTo(e),o=i(r);return o.$loaded().then(t)["catch"](a)}function _(t){var i=e.defer();return $(t).then(function(e){var t=0,a=e.length,n=void 0,s=[];for(t;a>t;t++)n=new Firebase(D+"observations").orderByChild("activity_location").equalTo(e[t]),n.on("value",function(e){for(var t in e.val())s.push(e.val()[t])});i.resolve(s)}),i.promise}function w(){function e(e){return e}function i(e){return s.catcher("Failed for dataservice.getProjects")(e)}var a=new Firebase(D+"activities"),n=t(a);return n.$loaded().then(e)["catch"](i)}function y(e){function t(e){return n("orderBy")(e,"updated_at",!0)}function a(e){return s.catcher("Failed for dataservice.getProjectsRecent")(e)}var r=new Firebase(D+"activities").orderByChild("updated_at").limitToLast(e),o=i(r);return o.$loaded().then(t)["catch"](a)}function $(t){function i(e){var t=[];for(var i in e.val())t.push(i);n.resolve(t)}function a(e){n.reject(s.catcher("Failed for dataservice.getProjectLocationIds")(e))}var n=e.defer(),r=new Firebase(D+"geo/activities").orderByChild("activity").equalTo(t);return r.on("value",i,a),n.promise}function j(e,t){function a(e){return e}function n(e){return s.catcher("Failed for dataservice.getProjectsRecent")(e)}var r=new Firebase(D+"ideas"),o=i(r),c={group:"idea",submitter:e,content:t,created_at:Firebase.ServerValue.TIMESTAMP};return o.$add(c).then(a)["catch"](n)}var D="https://naturenet-staging.firebaseio.com/",L={getArray:o,onAuth:c,getAuth:l,authWithPassword:d,createUser:u,removeUser:p,addUser:m,getUsers:v,getUsersRecent:g,getGroups:h,getGroupsByUserId:f,getObservationsArrayByUserId:b,getObservationsArrayByProjectId:_,getProjects:w,getProjectsRecent:y,addIdea:j};return L}angular.module("app.core").factory("dataservice",e),e.$inject=["$q","$firebaseObject","$firebaseArray","$firebaseAuth","$filter","exception","logger"]}(),function(){"use strict";function e(e,t){function i(e){var t=moment(e).format("MMM DD YYYY").toString();return t}function a(){e.showSplash=!0}function n(){t(function(){e.showSplash=!1},1e3)}var s={formatDate:i,showSplash:a,hideSplash:n};return s}angular.module("app.core").factory("utility",e),e.$inject=["$rootScope","$timeout"]}(),function(){"use strict";function e(e,t,i,a,n,s,r,o){function c(){var e=[l()];return r.getMap().then(function(t){s.info("Google Maps Ready"),b.map=t,d(),i.all(e).then(function(){o.hideSplash(),s.info("Activated Map View")})})}function l(){return n.getArray("observations").then(function(e){return b.observations=e,b.observations})}function d(){b.map.setOptions(b.mapOptions),t.$broadcast("map:init"),e.$on("map:toggle",p),e.$on("map:show",m),e.$on("map:hide",v)}function u(e){if(e){var t=new google.maps.LatLng({lat:e.l[0],lng:e.l[1]}),i=b.map.getZoom();b.map.panTo(t),18>i&&b.map.setZoom(18)}}function p(){t.$parent.hasMap=!t.$parent.hasMap}function m(e,i){i&&(b.currentObservation=i),t.$parent.hasMap=!0}function v(){t.$parent.hasMap=!1}function g(e){b.currentObservation=e,b.hasSidebar=!0}function h(){b.hasSidebar=!1}function f(){g(b.currentObservation),u(b.currentObservation)}o.showSplash();var b=this;b.title="Explore",t.$parent.hasMap=!1,b.toggleMap=p,b.hasSidebar=!1,b.showSidebar=g,b.hideSidebar=h,b.map=void 0,b.observations=[],b.isObservationsListVisible=!0,b.currentObservation=void 0,b.mapOptions={center:new google.maps.LatLng(39.833333,-98.583333),zoom:5,minZoom:3,zoomControl:!0,scaleControl:!1,streetViewControl:!1,keyboardShortcuts:!1,mapTypeId:google.maps.MapTypeId.HYBRID},b.formatDate=o.formatDate,c(),t.$watch("vm.currentObservation",f)}angular.module("app.explore").controller("ExploreController",e),e.$inject=["$rootScope","$scope","$q","$timeout","dataservice","logger","NgMap","utility"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"explore",config:{url:"/explore",templateUrl:"app/explore/explore.html",controller:"ExploreController",controllerAs:"vm",title:"Explore"}}]}angular.module("app.explore").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(){function e(e,t,i){function a(){s=e.map,google.maps.event.addListener(s,"bounds_changed",n)}function n(){function e(){return-85>r?i=c-(r+85):a>85&&(i=c-(a-85)),t=new google.maps.LatLng(i,l),void s.setCenter(t)}var t=void 0,i=void 0,a=s.getBounds().getNorthEast().lat(),n=s.getBounds().getNorthEast().lng(),r=s.getBounds().getSouthWest().lat(),o=s.getBounds().getSouthWest().lng(),c=s.getCenter().lat(),l=s.getCenter().lng(),d=-85>r&&a>85,u=r>-85&&85>a,p=d||u,m=n>0&&180>n&&l>0,v=0>o&&o>-180&&0>l,g=m||v;if(p&&g);else if(!p)return e()}var s=void 0;e.$on("map:init",a)}var t={link:e,restrict:"A"};return t}angular.module("app.explore").directive("nnMapContain",e),e.$inject=[]}(),function(){"use strict";function e(e,t,i,a,n){function s(){var e=[r(),o()];return t.all(e).then(function(){n.hideSplash(),a.info("Activated Home View")})}function r(){return i.getArray("observations").then(function(e){return l.observations=e,l.observations})}function o(){return i.getArray("ideas").then(function(e){return l.ideas=e,l.ideas})}function c(t){e.$broadcast("map:show",t)}n.showSplash();var l=this;l.title="Home",l.observations=void 0,l.observationsDisplayLimit=5,l.ideas=void 0,l.ideasDisplayLimit=5,l.formatDate=n.formatDate,l.showObservation=c,s()}angular.module("app.home").controller("HomeController",e),e.$inject=["$rootScope","$q","dataservice","logger","utility"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"home",config:{url:"/",templateUrl:"app/home/home.html",controller:"HomeController",controllerAs:"vm",title:"Home",settings:{content:"Home"}}}]}angular.module("app.home").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e,t,i,a,n){function s(){var t=[r()];return e.all(t).then(function(){n.hideSplash(),a.info("Activated Design Ideas View")})}function r(){return i.getArray("ideas").then(function(e){var t=0,i=e.length;for(t;i>t;t++)e[t].group&&"challenge"===e[t].group.toLowerCase()?u.challenges.push(e[t]):u.ideas.push(e[t]);return console.log("updated"),!0})}function o(e,t){return i.addIdea(e,t).then(function(e){r().then(function(){d(),a.success("Idea successfully submitted!")})})}function c(){return i.onAuth().then(function(e){return u.uid=e.uid,u.uid})}function l(){0!==u.content.length&&c().then(function(){o(u.uid,u.content)})}function d(){u.content=""}n.showSplash();var u=this;u.title="Design Ideas",u.sidebarDisplayLimit=3,u.ideas=[],u.isIdeasListVisible=!0,u.currentIdeaId=void 0,u.ideasDisplayLimit=u.sidebarDisplayLimit,u.challenges=[],u.isChallengesListVisible=!0,u.currentChallengeId=void 0,u.challengesDisplayLimit=u.sidebarDisplayLimit,u.formatDate=n.formatDate,u.uid=void 0,u.content="",u.addIdea=l,s()}angular.module("app.ideas").controller("IdeasController",e),e.$inject=["$q","$scope","dataservice","logger","utility"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"ideas",config:{url:"/ideas",templateUrl:"app/ideas/ideas.html",controller:"IdeasController",controllerAs:"vm",title:"Design Ideas",settings:{nav:4,content:"Design Ideas"}}}]}angular.module("app.ideas").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(e,t,i,a,n){function s(){o()}function r(){return n.onAuth().then(function(e){return h.isAuthenticated=!0,h.userUid=e.uid,h.userUid})}function o(){h.navRoutes=f.filter(function(e){return e.settings&&e.settings.nav}).sort(function(e,t){return e.settings.nav-t.settings.nav})}function c(e){return l(e)+" "+d(e)}function l(e){return"item-"+e.name}function d(e){if(!e.title||!t.current||!t.current.title)return"";var i=e.title;return t.current.title.substr(0,i.length)===i?"is-current":""}function u(t){"boolean"==typeof t&&t?(e.$broadcast("map:show"),h.isMapActive=t):"boolean"!=typeof t||t?"boolean"!=typeof t&&(e.$broadcast("map:toggle"),h.isMapActive=!h.isMapActive):(e.$broadcast("map:hide"),h.isMapActive=t)}function p(){e.$broadcast("register:show")}function m(){e.$broadcast("signin:show")}function v(){r()}function g(){h.isMapActive=!0}var h=this,f=i.getStates();h.getClasses=c,h.isMapActive=!1,h.toggleMap=u,h.showRegister=p,h.showSignin=m,h.userUid=void 0,h.isAuthenticated=!1,s(),e.$on("auth:success",v),e.$on("map:show",g)}angular.module("app.layout").controller("HeaderController",e),e.$inject=["$rootScope","$state","routerHelper","logger","dataservice"]}(),function(){"use strict";function e(e,t,i,a,n,s){function r(){a.info(i.appTitle+" loaded!",null);var t=[o(),c(),l()];return e.all(t).then(function(){s.hideSplash()})}function o(){return n.getUsers().then(function(e){return t.users=e,t.users})}function c(){return n.getGroups().then(function(e){return t.groups=e,t.groups})}function l(){return n.getProjects().then(function(e){return t.projects=e,t.projects})}function d(){t.$broadcast("auth:hide")}function u(){m.isAuth=!0}function p(){m.isAuth=!1}s.showSplash();var m=this;m.isAuth=!1,m.hideAuth=p,m.closeAuth=d,r(),t.$on("register:show",u),t.$on("signin:show",u),t.$on("auth:hide",p)}angular.module("app.layout").controller("ShellController",e),e.$inject=["$q","$rootScope","config","logger","dataservice","utility"]}(),function(){"use strict";function e(e,t,i,a){function n(){var t=[s(),r()];return e.all(t).then(function(){var t=[o(l.projectId)];e.all(t).then(function(){a.hideSplash(),i.info("Activated Projects View")})})}function s(){return t.getProjectsRecent(1).then(function(e){return l.projectId=e[0].id,l.projectId})}function r(){return t.getArray("activities").then(function(e){return l.projects=e,l.projects})}function o(e){return t.getObservationsArrayByProjectId(e).then(function(e){return l.projectObservations=e,l.projectObservations})}function c(t){var a=[o(t)];return e.all(a).then(function(){l.projectId=t,i.info("Updated Projects View based on new projectId")})}a.showSplash();var l=this;l.title="Projects",l.displayLimit=6,l.projectId=void 0,l.projects=void 0,l.projectObservations=void 0,l.isProjectsListVisible=!0,l.updateProjectId=c,l.formatDate=a.formatDate,n()}angular.module("app.projects").controller("ProjectsController",e),e.$inject=["$q","dataservice","logger","utility"]}(),function(){"use strict";function e(e){e.configureStates(t())}function t(){return[{state:"projects",config:{url:"/projects",templateUrl:"app/projects/projects.html",controller:"ProjectsController",controllerAs:"vm",title:"Projects",settings:{nav:3,content:"Projects"}}}]}angular.module("app.projects").run(e),e.$inject=["routerHelper"]}(),function(){"use strict";function e(){function e(e,t,i){e.showDefault=!1,e.avatarUrl&&""!==e.avatarUrl||(e.showDefault=!0)}var t={scope:{avatarUrl:"@",title:"@",subtitle:"@"},link:e,templateUrl:"app/widgets/nn-badge.html",restrict:"EA"};return t}angular.module("app.widgets").directive("nnBadge",e)}(),function(){"use strict";function e(e){function t(t,i,a){t.formatDate=e.formatDate,"[no description]"===t.comment?t.text="":t.text=t.comment}var i={scope:{avatarUrl:"@",name:"@",date:"@",comment:"@"},link:t,templateUrl:"app/widgets/nn-comment.html",restrict:"EA"};return i}angular.module("app.widgets").directive("nnComment",e),e.$inject=["utility"]}(),function(){"use strict";function e(e,t){function i(e,t,i){function a(){e.options.some(function(t){return t===e.selectedOption})&&(e.isPlaceholder=void 0===e.selectedOption[e.property],e.display=e.selectedOption[e.property])}function n(t){return e.isPlaceholder?void 0:t[e.property]===e.selectedOption[e.property]?"is-current":""}function s(){e.listVisible=!e.listVisible}function r(t){e.isPlaceholder=!1,e.selectedOption=t,e.listVisible=!1,e.display=e.selectedOption[e.property]}e.listVisible=!1,e.isPlaceholder=!0,e.isCurrent=n,e.toggleOptions=s,e.selectOption=r,a()}var a={scope:{placeholder:"@",options:"=",selectedOption:"=",property:"@"},link:i,templateUrl:"app/widgets/nn-dropdown.html",restrict:"EA"};return a}angular.module("app.widgets").directive("nnDropdown",e),e.$inject=["$rootScope","logger"]}(),function(){"use strict";function e(){function e(e,t,i){e.showDefault=!1,e.imageUrl&&""!==e.imageUrl||(e.showDefault=!0)}var t={scope:{imageUrl:"@"},link:e,templateUrl:"app/widgets/nn-image.html",restrict:"EA"};return t}angular.module("app.widgets").directive("nnImage",e)}(),function(){"use strict";function e(e,t){function i(i,a,n){function s(t){e.$broadcast("map:show",t)}function r(){i.limit=parseInt(i.limit)+parseInt(c)}function o(){i.limit=parseInt(c)}i.$watch("observations",o);var c=i.limit.slice(0);i.formatDate=t.formatDate,i.showObservation=s,i.incrementLimit=r}var a={scope:{observations:"=",limit:"@"},link:i,templateUrl:"app/widgets/nn-observations-list.html",restrict:"EA"};return a}angular.module("app.widgets").directive("nnObservationsList",e),e.$inject=["$rootScope","utility"]}(),function(){"use strict";function e(){function e(e,t,i){function a(){e.likes=n("likes"),e.dislikes=n("dislikes"),e.comments=n("comments")}function n(t){if(e.data[t]){var i=0,a=void 0;for(a in e.data[t])e.data[t][a]&&i++;return i}return 0}e.$watch("data",a)}var t={scope:{data:"=",showDislikes:"@"},link:e,templateUrl:"app/widgets/nn-social-totals.html",restrict:"EA"};return t}angular.module("app.widgets").directive("nnSocialTotals",e)}(),angular.module("app.core").run(["$templateCache",function(e){e.put("app/auth/auth.html",'<div class="auth -center" ng-click=$event.stopPropagation()><div class=auth__header><div class="auth__avatar -centerh"></div><div class=auth__close ng-click=vm.close()></div></div><div ng-if="vm.isRegister && !vm.isSignin" ng-include="\'app/auth/register.html\'"></div><div ng-if="!vm.isRegister && vm.isSignin" ng-include="\'app/auth/signin.html\'"></div></div>'),e.put("app/auth/register.html",'<form class="auth__form auth__form--register" ng-submit="vm.join(vm.email, vm.password)"><div class=auth__text>You are invited to participate in NatureNet, a research project conducted by the researchers listed at http://research.nature-net.org/people.html. In order for us to collect and study the way people are using technology like NatureNet, we must have your consent.</div><div style="margin-bottom: 30px; line-height: 1.4;">By joining, you agree to our Terms and that you have read our Privacy Policy and Content Policy.</div><input class=auth__field placeholder=Username type=text ng-model=vm.name> <input class=auth__field placeholder=password type=password ng-model=vm.password> <input class=auth__field placeholder=email type=text ng-model=vm.email> <input class="button button--auth" value=join type=submit></form>'),e.put("app/auth/signin.html",'<form class="auth__form auth__form--signin" ng-submit="vm.login(vm.email, vm.password)"><div class=auth__logo></div><input class=auth__field placeholder=email type=text ng-model=vm.email> <input class=auth__field placeholder=password type=password ng-model=vm.password> <input class="button button--auth" value="sign in" type=submit></form>'),e.put("app/communities/communities.html",'<div class="sidebar sidebar--communities"><header class="sidebar__header sidebar__header--people"><div class="dropdown dropdown--people" ng-class="{ \'dropdown--show-list\': !!vm.isPeopleListVisible }"><div class=dropdown__display ng-click="vm.isPeopleListVisible = !vm.isPeopleListVisible"><span>People</span><div class=dropdown__action></div></div><div class=dropdown__options><div class=dropdown__option ng-repeat="u in vm.users | limitTo: vm.peopleDisplayLimit" ng-click=vm.updateUserId(u.public.id)><nn-badge class=badge title={{u.public.display_name}} subtitle avatar-url={{u.public.avatar}}></nn-badge></div><div class=sidebar__see-more ng-if="vm.users.length > vm.peopleDisplayLimit"><a href=# ng-click="vm.peopleDisplayLimit = vm.peopleDisplayLimit + vm.sidebarDisplayLimit">See More</a></div></div></div></header><header class="sidebar__header sidebar__header--groups"><div class="dropdown dropdown--groups" ng-class="{ \'dropdown--show-list\': !!vm.isGroupsListVisible }"><div class=dropdown__display ng-click="vm.isGroupsListVisible = !vm.isGroupsListVisible"><span>Groups</span><div class=dropdown__action></div></div><div class=dropdown__options><div class=dropdown__option ng-repeat="g in vm.groups | limitTo: vm.groupsDisplayLimit"><nn-badge class=badge title={{g.name}} subtitle avatar-url={{g.avatar}}></nn-badge></div><div class=sidebar__see-more ng-if="vm.groups.length > vm.groupsDisplayLimit"><a href=# ng-click="vm.groupsDisplayLimit = vm.groupsDisplayLimit + vm.sidebarDisplayLimit">See More</a></div></div></div></header></div><div class="main main--with-sidebar main--communities"><section class="main__section masthead"><header class=masthead__header><div class=masthead__avatar style="background-image: url(\'{{$root.users[vm.userId].public.avatar}}\')"></div><div class=masthead__title>{{$root.users[vm.userId].public.display_name}}</div></header><div class=masthead__text>{{$root.users[vm.userId].public.bio}}</div></section><section class="main__section recent-contributions"><div class=main__subtitle>Recent Contributions</div><nn-observations-list observations=vm.userObservations limit={{vm.mainDisplayLimit}}></nn-observations-list></section><section class="main__section main__section--groups"><div class=main__subtitle>Groups</div><div class=main__groups><nn-badge class="badge badge--large" ng-if="vm.userGroups.length > 0" ng-repeat="g in vm.userGroups | limitTo: vm.groupsDisplayLimit" title={{g.name}} avatar-url={{g.avatar}}></nn-badge><div ng-if="vm.userGroups.length === 0">No groups.</div><div class ng-if="vm.userGroups.length > vm.groupsDisplayLimit"><a href=# ng-click="vm.groupsDisplayLimit = vm.groupsDisplayLimit + vm.mainDisplayLimit">See More</a></div></div></section></div>'),e.put("app/core/404.html","<section class=fourzerofour></section>"),e.put("app/explore/explore.html",'<ng-map nn-map-contain class=map default-style=false center="United States of America" ng-class="{\'has-sidebar\': !!vm.hasSidebar}"><div class="sidebar sidebar--map-list"><header class=sidebar__header><div class="dropdown dropdown--explore" ng-class="{ \'dropdown--show-list\': !!vm.isObservationsListVisible }"><div class=dropdown__display ng-click="vm.isObservationsListVisible = !vm.isObservationsListVisible"><span>Observations</span><div class=dropdown__action></div></div><div class=dropdown__options><div class=list-item ng-repeat="o in vm.observations" ng-click=vm.showSidebar(o)><nn-image class=list-item__image image-url={{o.data.image}}></nn-image><div class=list-item__detail><nn-comment class="comment list-item__comment" name={{$root.users[o.observer].public.display_name}} date={{o.updated_at}} avatar-url={{$root.users[o.observer].public.avatar}} comment={{o.data.text}}></nn-comment><nn-social-totals class=totals data=o></nn-social-totals></div></div></div></div></header></div><div ng-if=!!vm.currentObservation class="sidebar sidebar--slide sidebar--map-detail"><header class=sidebar__header><nn-badge class="badge sidebar__user" title={{$root.users[vm.currentObservation.observer].public.display_name}} subtitle={{vm.formatDate(vm.currentObservation.updated_at)}} avatar-url={{$root.users[vm.currentObservation.observer].public.avatar}}></nn-badge><a class=sidebar__close href=# ng-click=vm.hideSidebar()></a></header><section class=sidebar__content><div ng-if=vm.currentObservation.data.image nn-image class=sidebar__image image-url={{vm.currentObservation.data.image}}></div><p ng-if=vm.currentObservation.data.text class=sidebar__description>{{vm.currentObservation.data.text}}</p><nn-social-totals class=totals data=vm.currentObservation></nn-social-totals></section><section class=sidebar__comments><nn-comment class="comment list-item__comment" ng-repeat="c in vm.currentObservation.comments" name={{$root.users[c.commenter].public.display_name}} date={{c.updated_at}} avatar-url={{$root.users[c.commenter].public.avatar}} comment={{c.comment}}></nn-comment></section></div><custom-marker ng-repeat="o in vm.observations" position={{o.l}}><div class=map-marker ng-click=vm.showSidebar(o)></div></custom-marker></ng-map>'),e.put("app/home/home.html",'<div class=home-content><div class="content content--what"><div class=content__image style="background-image: url(\'/images/what.png\')"></div><div class=content__text><h1 class=content__title>What is NatureNet?</h1><h2 class=content__subtitle>Citizen Science Project with a Crowd-Sourced Design</h2><p class=content__description>NatureNet is a citizen science project with a crowd-sourced design. The goal to increase motivation for participation and to identify creative ways in which people can contribute to sustainable bio-diversity at the Aspen Center for Environmental Studies (ACES). NatureNet is funded by the National Science Foundation (IIS-1221513) in a grant to the University of North Carolina at Charlotte, the University of Maryland, and the University of Colorado. The project is in coordination with the naturalists at ACES.</p></div></div><div class="content content--why"><div class=content__image style="background-image: url(\'/images/why.png\')"></div><div class=content__text><h1 class=content__title>Why join NatureNet?</h1><h2 class=content__subtitle>Citizen Science Project with a Crowd-Sourced Design</h2><p class=content__description>NatureNet is a citizen science project with a crowd-sourced design. The goal to increase motivation for participation and to identify creative ways in which people can contribute to sustainable bio-diversity at the Aspen Center for Environmental Studies (ACES). NatureNet is funded by the National Science Foundation (IIS-1221513) in a grant to the University of North Carolina at Charlotte, the University of Maryland, and the University of Colorado. The project is in coordination with the naturalists at ACES.</p></div></div><div class=recent-observations></div></div><div class=home-items><ul class="items items--observations"><li class=items__group>Recent Observations</li><li class=item ng-repeat="o in vm.observations | limitTo: vm.observationsDisplayLimit" ng-click=vm.showObservation(o)><nn-badge class="badge item__user" title={{$root.users[o.observer].public.display_name}} subtitle={{vm.formatDate(o.updated_at)}} avatar-url={{$root.users[o.observer].public.avatar}}></nn-badge><nn-social-totals class="item__totals totals -centerv" data=o></nn-social-totals></li><li class=items__action ng-if="vm.observations.length > vm.observationsDisplayLimit"><a href=# ng-click="vm.observationsDisplayLimit = vm.observationsDisplayLimit + 5">See More</a></li></ul><ul class="items items--ideas"><li class=items__group>Recent Design Ideas</li><li class=item ng-repeat="i in vm.ideas | limitTo: vm.ideasDisplayLimit"><nn-badge class="badge item__user" title={{$root.users[i.submitter].public.display_name}} subtitle={{vm.formatDate(i.updated_at)}} avatar-url={{$root.users[i.submitter].public.avatar}}></nn-badge><nn-social-totals class="item__totals totals -centerv" data=i></nn-social-totals></li><li class=items__action ng-if="vm.ideas.length > vm.ideasDisplayLimit"><a href=# ng-click="vm.ideasDisplayLimit = vm.ideasDisplayLimit + 5">See More</a></li></ul></div>'),
e.put("app/ideas/ideas.html",'<div class="sidebar sidebar--ideas"><header class=sidebar__header><div class="dropdown dropdown--ideas" ng-class="{ \'dropdown--show-list\': !!vm.isIdeasListVisible }"><div class=dropdown__display ng-click="vm.isIdeasListVisible = !vm.isIdeasListVisible"><span>Design Ideas</span><div class=dropdown__action></div></div><div class=dropdown__options><div class=list-item ng-repeat="i in vm.ideas | limitTo: vm.ideasDisplayLimit" ng-click><nn-image class=list-item__image image-url={{}}></nn-image><div class=list-item__detail><nn-comment class="comment list-item__comment" name={{$root.users[i.submitter].public.display_name}} date={{vm.formatDate(i.updated_at)}} avatar-url={{$root.users[i.submitter].public.avatar}} comment={{i.content}}></nn-comment><nn-social-totals class=totals data=i></nn-social-totals></div></div><div class=sidebar__see-more ng-if="vm.ideas.length > vm.ideasDisplayLimit"><a href=# ng-click="vm.ideasDisplayLimit = vm.ideasDisplayLimit + vm.sidebarDisplayLimit">See More</a></div></div></div></header><header class=sidebar__header><div class="dropdown dropdown--challenges" ng-class="{ \'dropdown--show-list\': !!vm.isChallengesListVisible }"><div class=dropdown__display ng-click="vm.isChallengesListVisible = !vm.isChallengesListVisible"><span>Design Challenges</span><div class=dropdown__action></div></div><div class=dropdown__options><div class=list-item ng-repeat="c in vm.challenges | limitTo: vm.challengesDisplayLimit" ng-click><nn-image class=list-item__image image-url={{}}></nn-image><div class=list-item__detail><nn-comment class="comment list-item__comment" name={{$root.users[c.submitter].public.display_name}} date={{vm.formatDate(c.updated_at)}} avatar-url={{$root.users[c.submitter].public.avatar}} comment={{c.content}}></nn-comment><nn-social-totals class=totals data=c></nn-social-totals></div></div><div class=sidebar__see-more ng-if="vm.challenges.length > vm.challengesDisplayLimit"><a href=# ng-click="vm.challengesDisplayLimit = vm.challengesDisplayLimit + vm.sidebarDisplayLimit">See More</a></div></div></div></header></div><div class="main main--with-sidebar main--ideas"><section class="main__section masthead"><header class=masthead__header><div class=masthead__avatar style="background-size: cover; background-image: url(\'/images/design-ideas.png\')"></div><div class=masthead__title>Design Ideas</div></header><div class=masthead__text><p class=masthead__description>Crowdsourcing design is a way for anyone to contribute to the NatureNet experience. Designers change the world and the NatureNet project gives everyone a chance to be a designer. Your design ideas can be a new way of using NatureNet in your community, and new to use mobile technology for learning about sustainability or changes in the environment, or a new feature on the web site.</p><p class=masthead__directions>Join the discussion below with an idea or challenge of your own, comment on someone else\'s idea, or vote for your favorite idea.</p><form class="masthead__form clearfix" ng-submit=vm.addIdea()><div><textarea class=masthead__textarea placeholder="Write a design challenge..." ng-model=vm.content>\r\n          </textarea><div class=add-me>Adding photos coming soon</div></div><input class="button button--masthead" value=submit type=submit></form></div></section></div>'),e.put("app/layout/header.html",'<a class=head-logo href="/" ng-click=vm.toggleMap(false)></a><div class=head-menu><div class=head-menu__list><a class="head-menu__item item-explore" ng-click=vm.toggleMap() ng-class="{\'is-current\': !!vm.isMapActive}" href=#>Explore</a> <a class=head-menu__item ng-repeat="r in vm.navRoutes" ng-class=vm.getClasses(r) ng-bind-html=r.settings.content ng-click=vm.toggleMap(false) ui-sref={{r.name}}></a></div><div class=head-menu__foot style="display: none"></div></div><div class=head-user><div ng-hide=vm.isAuthenticated><a class="button head-user__item button--join" href=# ng-click=vm.showRegister()>Join</a> <a class="button head-user__item button--signin" href=# ng-click=vm.showSignin()>Sign In</a></div><div ng-show=vm.isAuthenticated><nn-badge class="badge head-user__item badge--header" title={{$root.users[vm.userUid].public.display_name}}></nn-badge></div></div>'),e.put("app/layout/shell.html",'<div class=page-logo><a href=#><i class=icon></i></a></div><header class=page-head ng-include="\'app/layout/header.html\'" ng-controller="HeaderController as vm"></header><main class=page-main ui-view></main><footer class=page-foot></footer><div class=page-map ng-include="\'app/explore/explore.html\'" ng-controller="ExploreController as vm" ng-class="{\'has-map\': !!hasMap}"></div><div class="page-over overlay" ng-hide=!vm.isAuth ng-click=vm.closeAuth()><div ng-include="\'app/auth/auth.html\'" ng-controller="AuthController as vm"></div></div>'),e.put("app/projects/projects.html",'<div class="sidebar sidebar--projects"><header class="sidebar__header sidebar__header--projects"><div class="dropdown dropdown--projects" ng-class="{ \'dropdown--show-list\': !!vm.isProjectsListVisible }"><div class=dropdown__display ng-click="vm.isProjectsListVisible = !vm.isProjectsListVisible"><span>Projects</span><div class=dropdown__action></div></div><div class=dropdown__options><div class=dropdown__option ng-repeat="p in vm.projects" ng-click=vm.updateProjectId(p.id)><nn-badge class=badge title={{p.name}} subtitle avatar-url={{p.icon_url}}></nn-badge></div></div></div></header></div><div class="main main--with-sidebar main--projects"><section class="main__section masthead"><header class=masthead__header><div class=masthead__avatar style="background-image: url(\'{{$root.projects[vm.projectId].icon_url}}\')"></div><div class=masthead__title>{{$root.projects[vm.projectId].name}}</div></header><div class=masthead__text>{{$root.projects[vm.projectId].description}}</div></section><section class="main__section recent-contributions"><div class=main__subtitle>Recent Contributions</div><nn-observations-list observations=vm.projectObservations limit={{vm.displayLimit}}></nn-observations-list></section></div>'),e.put("app/widgets/nn-badge.html","<div class=badge__avatar ng-if=showDefault style=\"background-image: url('/images/default-avatar.png')\"></div><div class=badge__avatar ng-if=!showDefault style=\"background-image: url('{{avatarUrl}}')\"></div><div class=badge__text><p class=badge__title>{{title}}</p><p ng-if=!!subtitle class=badge__subtitle>{{subtitle}}</p></div>"),e.put("app/widgets/nn-comment.html",'<nn-badge class="badge comment__user" title={{name}} subtitle={{formatDate(date)}} avatar-url={{avatarUrl}}></nn-badge><div class=comment__text>{{comment}}</div>'),e.put("app/widgets/nn-dropdown.html",'<div class=dropdown ng-class="{ \'dropdown--show-list\': !!listVisible }"><div class=dropdown__display ng-click=toggleOptions()><span ng-if=!isPlaceholder>{{display}}</span> <span class=placeholder ng-if=isPlaceholder>{{placeholder}}</span><div class=dropdown__action></div></div><div class=dropdown__options><div class=dropdown__option ng-repeat="o in options" ng-class=isCurrent(o) ng-click=selectOption(o)><span>{{property !== undefined ? o[property] : o}}</span></div></div></div>'),e.put("app/widgets/nn-image.html","<div ng-if=showDefault style=\"background-image: url('/images/default-image.png')\"></div><div ng-if=!showDefault style=\"background-image: url('{{imageUrl}}')\"></div>"),e.put("app/widgets/nn-observations-list.html",'<div class=main__observations><div class="list-item list-item--square" ng-if="observations.length > 0" ng-repeat="o in observations | limitTo: limit" ng-click=showObservation(o)><nn-image class=list-item__image image-url={{o.data.image}}></nn-image><div class=list-item__detail><nn-badge class="badge item__user" title={{$root.users[o.observer].public.display_name}} subtitle={{formatDate(o.updated_at)}} avatar-url={{$root.users[o.observer].public.avatar}}></nn-badge></div></div><div ng-if="observations.length === 0">No contributions.</div></div><div class ng-if="observations.length > limit"><a href=# ng-click=incrementLimit()>See More</a></div>'),e.put("app/widgets/nn-social-totals.html",'<div class="totals__total totals__total--likes">{{likes}}</div><div class="totals__total totals__total--dislikes" ng-if=false>{{dislikes}}</div><div class="totals__total totals__total--comments">{{comments}}</div>')}]);